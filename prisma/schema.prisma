generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum AssumptionArea {
  CUSTOMER
  PROBLEM
  SOLUTION
  CHANNEL
  PRICING
  OPS
  OTHER
}

enum AssumptionStatus {
  UNTESTED
  TESTING
  VALIDATED
  INVALIDATED
  PARKED
}

model Assumption {
  id           String           @id @default(cuid())
  statement    String
  area         AssumptionArea
  risk         Int              // 1-5
  confidence   Int              // 1-5
  status       AssumptionStatus @default(UNTESTED)

  testPlan     String?
  decisionNote String?
  dueDate      DateTime?

  createdAt    DateTime         @default(now())
  updatedAt    DateTime         @updatedAt

  evidence     Evidence[]
}

model Evidence {
  id           String     @id @default(cuid())

  assumptionId String
  assumption   Assumption @relation(fields: [assumptionId], references: [id], onDelete: Cascade)

  type         String     // "note" | "link"
  content      String

  createdAt    DateTime   @default(now())

  @@index([assumptionId, createdAt])
}
